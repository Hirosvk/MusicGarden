{"version":3,"sources":["webpack:///webpack/bootstrap a8c6756f3119f0da8976","webpack:///./frontend/entry.js","webpack:///./frontend/lib/canvas.js","webpack:///./frontend/constants/colors.js","webpack:///./frontend/utils/transpose.js","webpack:///./frontend/constants/scales.js","webpack:///./frontend/lib/note.js","webpack:///./frontend/constants/notes.js","webpack:///./frontend/constants/audio_context.js","webpack:///./frontend/lib/triangle.js","webpack:///./frontend/utils/color_blender.js","webpack:///./frontend/lib/color_tile.js","webpack:///./frontend/lib/music_tracker.js","webpack:///./frontend/lib/keyboard.js","webpack:///./frontend/lib/drum.js","webpack:///./frontend/constants/drum_sounds.js","webpack:///./frontend/lib/beat_maker.js","webpack:///./frontend/constants/beat_patterns.js","webpack:///./frontend/lib/game_ui.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;;;;;;AC1BD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,qBAAqB;AACtC,mBAAkB,yBAAyB;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA4B;AAC5B,iBAAgB,kBAAkB;AAClC;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,6BAA4B;AAC5B;AACA;;;;AAIA;AACA;AACA;;AAEA,kBAAiB,qBAAqB;AACtC,mBAAkB,yBAAyB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA,kBAAiB,qBAAqB;AACtC,mBAAkB,yBAAyB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAwB;AACxB,yBAAwB;AACxB,MAAK;AACL,yBAAwB;AACxB,yBAAwB;AACxB;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,oBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC3CA;AACA;AACA;AACA;;;;;;;ACHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7GA;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAiD;AACjD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,qBAAoB,cAAc;AAClC;AACA,IAAG;AACH;;AAEA;AACA,kBAAiB,OAAO,OAAO;AAC/B;AACA,G;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,QAAQ,EAAE,QAAQ,EAAE,QAAQ;AAC3C,IAAG;;AAEH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;;;;;;ACnCA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAiC,cAAc,QAAQ;AACvD;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC1CA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;;AAEA;;;;;;;AChDA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;;;;;AC5DA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACnCA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB,iCAAiC;AAC1D;;;AAGA;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a8c6756f3119f0da8976\n **/","const Canvas = require('./lib/canvas.js');\nconst MusicTracker = require('./lib/music_tracker.js');\nconst GameUI = require('./lib/game_ui.js');\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n  const gameUI = new GameUI();\n\n  const canvasEl = document.getElementById('canvas');\n  gameUI.setupCanvas(canvasEl, [canvasEl.width, canvasEl.height]);\n  gameUI.setupCanvasGrid(30);\n\n  const musicFrame = document.getElementById('music-tracker');\n  const musicOptions = {\n    keyboard:  {\n      scale: \"major\",\n      root: \"C4\"\n    },\n    beatMaker: {\n      tempo: 60,\n      pattern: \"FourBeat\"\n    }\n  };\n  gameUI.setupMusicTracker(musicFrame, musicOptions);\n\n  gameUI.animateCanvas();\n\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/entry.js\n ** module id = 0\n ** module chunks = 0\n **/","const Colors = require('../constants/colors.js');\nconst Transpose = require('../utils/transpose.js');\nconst Triangle = require('./triangle.js');\nconst ColorTile = require('./color_tile.js');\n\nlet Pos = [[12,12],[9,9],[18,12],[9,15],[15,9],[6,12],[15,15]];\n\nfunction Canvas(ctx, dims){\n  this.ctx = ctx;\n  this.dims = dims;\n}\n\nCanvas.prototype.setupGrid = function (triDim) {\n  this.grid = {};\n  this.triDim = triDim;\n  this.cosDim = Math.floor(triDim * 0.866);\n  this.rowLength = Math.floor(this.dims[0]/this.triDim) * 2;\n  this.colLength = Math.floor(this.dims[1]/this.cosDim);\n\n  for (let y = 0; y <= this.colLength; y++){\n    for(let x = 0; x <= this.rowLength + 1; x++){\n      this.grid[[x,y]] = new Triangle([x,y]);\n    }\n  }\n};\n\nCanvas.prototype.receiveNotes = function (notes) {\n  this.notesToTiles(notes);\n};\n\nCanvas.prototype.notesToTiles = function (notes){\n  let colors = this.generateColors(notes);\n  console.log(colors);\n  notes.forEach( (note, nIdx) => {\n    colors[note].forEach( (color, cIdx) => {\n      this.addColorTile(Pos[nIdx], color, cIdx);\n      // if (cIdx > 5) {debugger};\n      // max notes.length is 7, max colors.length is 6;\n    });\n  });\n};\n\nCanvas.prototype.addColorTile = function (pos, color, dirCode){\n  let tile = new ColorTile(pos, color, dirCode);\n  this.grid[pos].receiveColorTile(tile);\n};\n\nCanvas.prototype.generateColors = function (notes) {\n  let colors = {};\n  // if (notes.length > 1) {debugger;}\n  for(let i = 0; i < notes.length; i++){\n    _notes = notes.slice();\n    _notes.splice(i, 1);\n    colors[notes[i]] = _notes.map( _note => {\n      return Colors[Transpose.interval(notes[i], _note)]\n    })\n  }\n  // if (notes.length > 2) {debugger}\n  return colors\n};\n\n\n\nCanvas.prototype.render = function () {\n  let anchor = [0,0];\n  let _x = 0;\n\n  for (let y = 0; y <= this.colLength; y++){\n    for(let x = 0; x <= this.rowLength + 1; x++){\n      let row = [];\n      if (x % 2 === 1){\n        this.ctx.beginPath();\n        this.ctx.moveTo(anchor[0], anchor[1]);\n        this.ctx.lineTo(anchor[0] + Math.floor(this.triDim/2), anchor[1] + this.cosDim);\n        this.ctx.lineTo(anchor[0] + this.triDim, anchor[1]);\n      } else {\n        this.ctx.beginPath();\n        this.ctx.moveTo(anchor[0], anchor[1]);\n        this.ctx.lineTo(anchor[0] - Math.floor(this.triDim/2), anchor[1] + this.cosDim);\n        this.ctx.lineTo(anchor[0] + Math.floor(this.triDim/2), anchor[1] + this.cosDim);\n      }\n      if (this.grid[[x+_x, y]]) {\n        this.ctx.fillStyle = this.grid[[x+_x, y]].getColor();\n        this.ctx.fill();\n      } else {\n        this.ctx.closePath();\n      }\n      anchor[0] += (this.triDim * (x % 2));\n    }\n    if (y % 2 === 0){\n      anchor[0] = -(Math.floor(this.triDim/2));\n      _x = -1;\n    } else {\n      anchor[0] = 0;\n      _x = 0;\n    }\n    anchor[1] += this.cosDim;\n  }\n};\n\n\n\nCanvas.prototype.moveColorTiles = function () {\n  let leavingTiles = [];\n  for (let y = 0; y <= this.colLength; y++){\n    for(let x = 0; x <= this.rowLength + 1; x++){\n      leavingTiles = leavingTiles.concat(this.grid[[x,y]].emitColorTiles());\n    }\n  }\n  leavingTiles.forEach( tile => {\n    if (this.grid[tile.pos]){\n      this.grid[tile.pos].receiveColorTile(tile);\n    }\n  });\n};\n\nCanvas.prototype.renderFrame = function () {\n  this.render();\n  this.moveColorTiles();\n};\n\nCanvas.prototype.animate = function(){\n  this.animation = setInterval(this.renderFrame.bind(this), 100);\n};\n\nCanvas.prototype.stopAnimation = function(){\n  clearInterval(this.animation);\n};\n\nmodule.exports = Canvas;\nwindow.Canvas = Canvas;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/canvas.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = {\n  0: '#000000',\n  1: '#000000',\n  2: '#FF0080', //2\n  3: '#00FFFF', //-3\n  4: '#FFFF00', //3\n  5: '#0000FF', //4\n  6: '#8000FF', //tritone\n  7: '#FF0000', //5\n  8: '#FF00FF', //-6\n  9: '#00FF00', //6\n  10: '#0080FF', //-7\n  11: '#00FF80',\n  12: '#FF8000',\n  14: '#80FF00'//9th\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/constants/colors.js\n ** module id = 2\n ** module chunks = 0\n **/","const notes = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B']\nconst Scales = require('../constants/scales.js');\nconst Note = require('../lib/note.js');\n\nmodule.exports = {\n  interval(noteA, noteB){\n    const _noteA = noteA.match(/([A-Gb]+)(\\d)/);\n    const _noteB = noteB.match(/([A-Gb]+)(\\d)/);\n    let hNote, hNum, lNote, lNum;\n\n    if(\n      ( notes.indexOf(_noteB[1]) > notes.indexOf(_noteA[1]) && _noteB[2] === _noteA[2] ) ||\n      (_noteB[2] > _noteA[2])){\n      lNote = _noteA[1]; lNum = _noteA[2];\n      hNote = _noteB[1]; hNum = _noteB[2];\n    } else {\n      hNote = _noteA[1]; hNum = _noteA[2];\n      lNote = _noteB[1]; lNum = _noteB[2];\n    }\n\n    return notes.indexOf(hNote) - notes.indexOf(lNote) + ((hNum - lNum) * 12);\n  },\n\n  getNote(root, interval){\n    const _root = root.match(/([A-Gb]+)(\\d)/);\n    const rNote = _root[1];\n    const rNum = _root[2];\n\n    const rIdx = notes.indexOf(rNote);\n    return notes[(rIdx + interval)%12] + (parseInt(rNum) + Math.floor((rIdx + interval)/12)).toString();\n  },\n\n  generateNotes(scale, root){\n    let allNotes = [];\n    let totalInt = 0;\n    for (let i = 0; i < Scales[scale].length; i++){\n      totalInt += Scales[scale][i];\n      let newNoteName = this.getNote(root, totalInt);\n      allNotes.push(new Note(newNoteName));\n    }\n    return allNotes;\n  }\n\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/utils/transpose.js\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = {\n  major: [0, 2, 2, 1, 2, 2, 2, 1],\n  minor: [0, 2, 1, 2, 2, 1, 2, 2]\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/constants/scales.js\n ** module id = 4\n ** module chunks = 0\n **/","const freq = require('../constants/notes.js');\nconst audioContext = require('../constants/audio_context.js');\n\nfunction Note (name){\n  this.name = name;\n  this.osc = audioContext.createOscillator();\n  this.osc.frequency.value = freq[name];\n  this.gainNode = audioContext.createGain();\n  this.gainNode.gain.value = 0;\n  this.osc.connect(this.gainNode);\n  this.gainNode.connect(audioContext.destination);\n  this.osc.start(0);\n\n  this.playing = false;\n}\n\nNote.prototype.start = function(){\n  // this.osc.connect(audioContext.destination);\n  // when connecting/disconnecting to 'destination' to start/stop the note,\n  // it made unplesant noise. Controlling gained worked better in terms of\n  // sound quality.\n  if (!this.playing){\n    this.gainNode.gain.value = 0.3;\n    this.playing = true;\n    return true;\n  }\n  return false;\n};\n\nNote.prototype.stop = function(){\n  // this.osc.disconnect(audioContext.destination);\n  this.gainNode.gain.value = 0;\n  this.playing = false;\n};\n\nNote.prototype.frequency = function () {\n  return freq[this.name];\n};\n\nmodule.exports = Note;\nwindow.Note = Note;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/note.js\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = {\n  C0:\t16.35,\n  Db0:\t17.32,\n  D0:\t18.35,\n  Eb0:\t19.45,\n  E0:\t20.60,\n  F0:\t21.83,\n  Gb0:\t23.12,\n  G0:\t24.50,\n  Ab0:\t25.96,\n  A0:\t27.50,\n  Bb0:\t29.14,\n  B0:\t30.87,\n  C1:\t32.70,\n  Db1:\t34.65,\n  D1:\t36.71,\n  Eb1:\t38.89,\n  E1:\t41.20,\n  F1:\t43.65,\n  Gb1:\t46.25,\n  G1:\t49.00,\n  Ab1:\t51.91,\n  A1:\t55.00,\n  Bb1:\t58.27,\n  B1:\t61.74,\n  C2:\t65.41,\n  Db2:\t69.30,\n  D2:\t73.42,\n  Eb2:\t77.78,\n  E2:\t82.41,\n  F2:\t87.31,\n  Gb2:\t92.50,\n  G2:\t98.00,\n  Ab2:\t103.83,\n  A2: 110.00,\n  Bb2: 116.54,\n  B2: 123.47,\n  C3: 130.81,\n  Db3: 138.59,\n  D3:\t146.83,\n  Eb3: 155.56,\n  E3:\t164.81,\n  F3:\t174.61,\n  Gb3: 185.00,\n  G3:\t196.00,\n  Ab3: 207.65,\n  A3:\t220.00,\n  Bb3: 233.08,\n  B3:\t246.94,\n  C4:\t261.63,\n  Db4: 277.18,\n  D4:\t293.66,\n  Eb4: 311.13,\n  E4:\t329.63,\n  F4:\t349.23,\n  Gb4: 369.99,\n  G4:\t392.00,\n  Ab4: 415.30,\n  A4:\t440.00,\n  Bb4: 466.16,\n  B4:\t493.88,\n  C5:\t523.25,\n  Db5: 554.37,\n  D5:\t587.33,\n  Eb5: 622.25,\n  E5:\t659.25,\n  F5:\t698.46,\n  Gb5: 739.99,\n  G5:\t783.99,\n  Ab5: 830.61,\n  A5:\t880.00,\n  Bb5: 932.33,\n  B5:\t987.77,\n  C6:\t1046.50,\n  Db6: 1108.73,\n  D6:\t1174.66,\n  Eb6: 1244.51,\n  E6:\t1318.51,\n  F6:\t1396.91,\n  Gb6: 1479.98,\n  G6:\t1567.98,\n  Ab6: 1661.22,\n  A6:\t1760.00,\n  Bb6: 1864.66,\n  B6:\t1975.53,\n  C7:\t2093.00,\n  Db7: 2217.46,\n  D7:\t2349.32,\n  Eb7: 2489.02,\n  E7:\t2637.02,\n  F7:\t2793.83,\n  Gb7: 2959.96,\n  G7:\t3135.96,\n  Ab7: 3322.44,\n  A7:\t3520.00,\n  Bb7: 3729.31,\n  B7:\t3951.07,\n  C8:\t4186.01,\n  Db8: 4434.92,\n  D8:\t4698.63,\n  Eb8: 4978.03,\n  E8:\t5274.04,\n  F8:\t5587.65,\n  Gb8: 5919.91,\n  G8:\t6271.93,\n  Ab8: 6644.88,\n  A8:\t7040.00,\n  Bb8: 7458.62,\n  B8:\t7902.13\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/constants/notes.js\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = new (window.AudioContext || window.webkitAudioContext)();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/constants/audio_context.js\n ** module id = 7\n ** module chunks = 0\n **/","const ColorBlender = require('../utils/color_blender.js');\n\nfunction Triangle(pos){\n  this.pos = pos;\n  this.reset();\n}\n\nTriangle.prototype.reset = function () {\n  this.color = '#FFFFFF';\n  this.colorTiles = [];\n  this.inColors = ['#FFFFFF'];\n};\n\nTriangle.prototype.getColor = function () {\n  this.color = ColorBlender.blend(this.inColors); // called on render\n  return this.color;\n};\n\n\nTriangle.prototype.emitColorTiles = function () {\n  const leavingTiles = this.colorTiles.map( tile => {\n    tile.color = this.color;\n    tile.newPos();\n    return tile;\n  });\n  this.reset();\n  return leavingTiles.filter(function(tile){\n    if (!tile.pos) { return false; }\n    return true;\n  });\n};\n\nTriangle.prototype.receiveColorTile = function (colorTile) {\n  for (let i = 0; i < 3; i++) {this.inColors.push(colorTile.color);}\n  this.colorTiles.push(colorTile);\n}; \n\nmodule.exports = Triangle;\nwindow.Triangle = Triangle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/triangle.js\n ** module id = 8\n ** module chunks = 0\n **/","const ColorBlender = {\n  blend(colors){\n    let r = 0, g = 0, b = 0;\n    colors.forEach(color => {\n      r += this.toBase10Int(color[1])*16 + this.toBase10Int(color[2]);\n      g += this.toBase10Int(color[3])*16 + this.toBase10Int(color[4]);\n      b += this.toBase10Int(color[5])*16 + this.toBase10Int(color[6]);\n    });\n    let mR = parseInt(r/colors.length);\n    let resultR = this.toHex(parseInt(mR / 16)) + this.toHex(mR % 16);\n    let mG = parseInt(g/colors.length);\n    let resultG = this.toHex(parseInt(mG / 16)) + this.toHex(mG % 16);\n\n    let mB = parseInt(b/colors.length);\n    let resultB = this.toHex(parseInt(mB / 16)) + this.toHex(mB % 16);\n    return `#${resultR}${resultG}${resultB}`;\n  },\n\n  toBase10Int(hex){\n    if (hex.match(/\\d/)){\n      return parseInt(hex);\n    } else {\n      return hex.charCodeAt(0) - 55;\n    }\n  },\n\n  toHex(int){\n    if (int < 10){\n      return int.toString();\n    } else {\n      return String.fromCharCode(int + 55);\n    }\n  }\n};\n\nmodule.exports = ColorBlender;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/utils/color_blender.js\n ** module id = 9\n ** module chunks = 0\n **/","const Dir = {\n  0: {\n    up: [1,0],\n    down: [1,0]\n  },\n  4: {\n    up: [1,0],\n    down: [0,-1]\n  },\n  1: {\n    up: [-1,0],\n    down: [0,-1]\n  },\n  3: {\n    up: [-1,0],\n    down: [-1,0]\n  },\n  5: {\n    up: [0,1],\n    down: [-1,0]\n  },\n  2: {\n    up: [0,1],\n    down: [1,0]\n  }\n};\n\n\nfunction ColorTile(pos, color, dirCode){\n  this.pos = pos;\n  this.color = color;\n  this.path = Dir[dirCode];\n}\n\nColorTile.prototype.newPos = function () {\n  if (this.color === '#FFFFFF') { this.pos = 0; return; }\n  const dir = ((this.pos[0] + this.pos[1]) % 2) ? 'down' : 'up';\n  // const newX = this.pos[0] + this.path[dir][0];\n  // const newY = this.pos[1] + this.path[dir][1]\n  this.pos = [this.pos[0] + this.path[dir][0], this.pos[1] + this.path[dir][1]];\n};\n\nmodule.exports = ColorTile;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/color_tile.js\n ** module id = 10\n ** module chunks = 0\n **/","const Keyboard = require('./keyboard.js');\nconst BeatMaker = require('./beat_maker.js');\n\nfunction MusicTracker (keyboardOptions, beatMakerOptions, passNotesToUI){\n  this.passNotesToUI = passNotesToUI;\n\n  this.trackerStore = [];\n  keyboardOptions.updateNotes = this.updateNotes.bind(this);\n  this.keyboard = new Keyboard (keyboardOptions, this.trackerStore);\n\n  this.beatOn = false;\n  beatMakerOptions.setListenStatus = this.setListenStatus.bind(this);\n  beatMakerOptions.emitNotes = this.emitNotes.bind(this);\n  beatMakerOptions.clearStore = this.clearStore.bind(this);\n  this.beatMaker = new BeatMaker(beatMakerOptions);\n}\n\nMusicTracker.prototype.setup = function (musicEl) {\n  const keyboardEl = document.createElement('div');\n  keyboardEl.style = 'keyboard-frame';\n  this.keyboard.setup(keyboardEl);\n  const beatMakerEl = document.createElement('div');\n  beatMakerEl.style = 'beat-maker-frame';\n  this.beatMaker.setup(beatMakerEl);\n\n  musicEl.appendChild(keyboardEl);\n  musicEl.appendChild(beatMakerEl);\n};\n\nMusicTracker.prototype.emitNotes = function(){\n  this.passNotesToUI(this.trackerStore);\n};\n\nMusicTracker.prototype.clearStore = function(){\n  this.trackerStore = [];\n}\n\nMusicTracker.prototype.setListenStatus = function (boolean) {\n  this.beatOn = boolean;\n};\n\nMusicTracker.prototype.updateNotes = function (note) {\n  if (this.beatOn){\n    if (this.trackerStore.length > 6 ){this.trackerStore.splice(0,1);}\n    this.trackerStore.push(note);\n  }\n};\n\nmodule.exports = MusicTracker;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/music_tracker.js\n ** module id = 11\n ** module chunks = 0\n **/","const Note = require('./note.js');\nconst Scales = require('../constants/scales.js');\nconst Transpose = require('../utils/transpose.js');\nconst KickDrum = require('./drum.js').KickDrum;\n\nconst keyMatch = ['KeyA','KeyS','KeyD','KeyF','KeyG','KeyH','KeyJ','KeyK','KeyL'];\n\n\nfunction Keyboard(options){\n  this.notes = Transpose.generateNotes(options.scale, options.root);\n  this.keyMatch = keyMatch.slice(0, this.notes.length);\n  this.updateNotes = options.updateNotes;\n}\n\nKeyboard.prototype.showKeys = function () {\n  this.notes.forEach(note => {\n    console.log(note);\n  });\n};\n\n\nKeyboard.prototype.setup = function (el) {\n  const boardEl = document.createElement('div');\n  boardEl.style = 'keyboard';\n  this.notes.forEach((note, idx) => {\n    let newKey = document.createElement('span');\n    newKey.style = \"key\";\n    newKey.innerHTML = note.name;\n    boardEl.appendChild(newKey);\n  });\n\n  document.addEventListener(\"keydown\", this.keydown.bind(this));\n\n  document.addEventListener(\"keyup\", this.keyup.bind(this));\n\n  el.appendChild(boardEl);\n};\n\n\nKeyboard.prototype.keydown = function(event) {\n  event.preventDefault();\n  let idx = this.keyMatch.indexOf(event.code);\n  if (idx > -1) {\n    if (this.notes[idx].start()){\n      this.updateNotes(this.notes[idx].name);\n    }\n  }\n};\n\nKeyboard.prototype.keyup = function(event){\n  event.preventDefault();\n  let idx = this.keyMatch.indexOf(event.code);\n  if (idx > -1) {\n    this.notes[idx].stop();\n  }\n};\n\n\n\nmodule.exports = Keyboard;\nwindow.Keyboard = Keyboard;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/keyboard.js\n ** module id = 12\n ** module chunks = 0\n **/","const DrumSounds = require('../constants/drum_sounds.js');\nconst audioContext = require('../constants/audio_context.js');\n\nfunction KickDrum (){\n\n}\n\nKickDrum.prototype.name = function(){\n  return \"Kick Drum\";\n};\n\nKickDrum.prototype.start = function() {\n  this.osc = audioContext.createOscillator();\n  this.gainNode = audioContext.createGain();\n  this.osc.connect(this.gainNode);\n  this.gainNode.connect(audioContext.destination);\n\n  const now = audioContext.currentTime;\n\n  this.osc.frequency.setValueAtTime(150, now);\n\tthis.gainNode.gain.setValueAtTime(2, now);\n\n\tthis.osc.frequency.exponentialRampToValueAtTime(0.01, now + 0.5);\n\tthis.gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.5);\n\tthis.osc.start(now);\n\n\tthis.osc.stop(now + 0.5);\n};\n\nKickDrum.prototype.stop = function () {\n  // does nothing\n};\n\nmodule.exports = {\n  KickDrum: KickDrum\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/drum.js\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = {\n  kickDrum: {\n    freq: 150\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/constants/drum_sounds.js\n ** module id = 14\n ** module chunks = 0\n **/","const KickDrum = require('./drum.js').KickDrum;\nconst BeatPatterns = require('../constants/beat_patterns.js');\n\nfunction BeatMaker(options){\n  this.tempo = options.tempo;\n  this.pattern = BeatPatterns[options.pattern];\n  this.timeSig = options.timeSig || 4;\n\n  this.emitNotes = options.emitNotes;\n  this.clearStore = options.clearStore;\n  this.setListenStatus = options.setListenStatus;\n  this.drum = new KickDrum;\n}\n\nBeatMaker.prototype.setup = function(parentEl){\n  let startButton = document.createElement('button');\n\n  startButton.innerHTML = \"start beat\";\n  startButton.addEventListener(\"click\", function(event){\n    event.preventDefault();\n    this.start();\n  }.bind(this));\n  parentEl.appendChild(startButton);\n\n  let stopButton = document.createElement('button');\n  stopButton.innerHTML = \"stop beat\";\n  stopButton.addEventListener(\"click\", function(event){\n    event.preventDefault();\n    this.stop();\n  }.bind(this));\n  parentEl.appendChild(stopButton);\n};\n\nBeatMaker.prototype.manageBeat = function () {\n  this.idx = this.idx || 0;\n  if (this.pattern[this.idx]){\n    this.drum.start();\n    this.emitNotes();\n  }\n  if (this.idx === this.pattern.length -1){\n    this.idx = 0;\n    this.clearStore();\n  } else {\n    this.idx++;\n  }\n  // this.idx = (this.idx === this.pattern.length - 1) ? 0 : this.idx + 1;\n};\n\n\nBeatMaker.prototype.start = function () {\n  this.setListenStatus(true);\n  let interval = (this.tempo / 60) / (this.pattern.length / this.timeSig) * 1000;\n  this.currentBeat = setInterval(this.manageBeat.bind(this), interval);\n};\n\nBeatMaker.prototype.stop = function () {\n  this.setListenStatus(false);\n  if (this.currentBeat) { clearInterval(this.currentBeat); }\n};\n\n\nmodule.exports = BeatMaker;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/beat_maker.js\n ** module id = 15\n ** module chunks = 0\n **/","module.exports = {\n  FourBeat: [1,1,1,1],\n  FourBeat2: [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1]\n};\n// each array is one bar\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/constants/beat_patterns.js\n ** module id = 16\n ** module chunks = 0\n **/","const MusicTracker = require('./music_tracker.js');\nconst Canvas = require('./canvas.js');\n\nfunction GameUI(){\n}\n\nGameUI.prototype.receiveNotes = function (notes) {\n  this.canvas.receiveNotes(notes);\n};\n\nGameUI.prototype.setupMusicTracker = function (musicEl, musicOptions) {\n  this.musicTracker = new MusicTracker (\n    musicOptions.keyboard,\n    musicOptions.beatMaker,\n    this.receiveNotes.bind(this)\n  );\n  this.musicTracker.setup(musicEl);\n};\n//\nGameUI.prototype.setupCanvas = function (canvasEl, dims) {\n  this.ctx = canvasEl.getContext('2d');\n  this.canvas = new Canvas(this.ctx, dims);\n};\n\nGameUI.prototype.setupCanvasGrid = function (triDim) {\n  this.canvas.setupGrid(triDim);\n};\n\nGameUI.prototype.animateCanvas = function() {\n  this.canvas.animate();\n};\n\n\nmodule.exports = GameUI;\nwindow.GameUI = GameUI;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/lib/game_ui.js\n ** module id = 17\n ** module chunks = 0\n **/"],"sourceRoot":""}